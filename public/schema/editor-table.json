{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "editor-table",
  "title": "Editor Table Extension",
  "description": "Table extension with resizable columns, cell controls, and bubble menu.",
  "dependencies": [
    "@tiptap/extension-table",
    "@tiptap/extension-table-row",
    "@tiptap/extension-table-header",
    "@tiptap/extension-table-cell"
  ],
  "registryDependencies": [
    "editor"
  ],
  "files": [
    {
      "path": "src/registry/editor/editor-table.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { Table } from \"@tiptap/extension-table\"\nimport { TableCell } from \"@tiptap/extension-table-cell\"\nimport { TableHeader } from \"@tiptap/extension-table-header\"\nimport { TableRow } from \"@tiptap/extension-table-row\"\nimport { BubbleMenu, useEditorState } from \"@tiptap/react\"\nimport { EditorContext } from \"./editor\"\nimport { Button } from \"@/components/ui/button\"\nimport {\n  DropdownMenu,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\"\nimport { DropdownMenuContent as DropdownMenuContentPrimitive } from \"@radix-ui/react-dropdown-menu\"\nimport { cn } from \"@/lib/utils\"\nimport {\n  AlignCenter,\n  AlignLeft,\n  AlignRight,\n  AlignVerticalJustifyCenter,\n  AlignVerticalJustifyEnd,\n  AlignVerticalJustifyStart,\n  ArrowDownToLine,\n  ArrowLeftToLine,\n  ArrowRightToLine,\n  ArrowUpToLine,\n  ChevronDown,\n  Columns3,\n  Combine,\n  Rows3,\n  Split,\n  TableProperties,\n  Trash2,\n} from \"lucide-react\"\n\n// =============================================================================\n// EditorTableExtension\n// =============================================================================\n\nexport interface EditorTableOptions {\n  resizable?: boolean\n  HTMLAttributes?: Record<string, unknown>\n}\n\nexport const EditorTableExtension = Table.configure({\n  resizable: true,\n  HTMLAttributes: {\n    class: cn(\n      \"w-full caption-bottom text-sm my-4 border border-border\",\n      \"border-collapse table-fixed\",\n      // Resize cursor when resizing\n      \"[&.resize-cursor]:cursor-col-resize\"\n    ),\n  },\n})\n\nexport const EditorTableRowExtension = TableRow.configure({\n  HTMLAttributes: {\n    class:\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n  },\n})\n\nexport const EditorTableHeaderExtension = TableHeader.extend({\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      textAlign: {\n        default: null,\n        parseHTML: (element) =>\n          element.style.textAlign || element.getAttribute(\"data-text-align\"),\n        renderHTML: (attributes) => {\n          if (!attributes.textAlign) return {}\n          return {\n            style: `text-align: ${attributes.textAlign}`,\n            \"data-text-align\": attributes.textAlign,\n          }\n        },\n      },\n      verticalAlign: {\n        default: null,\n        parseHTML: (element) =>\n          element.style.verticalAlign ||\n          element.getAttribute(\"data-vertical-align\"),\n        renderHTML: (attributes) => {\n          if (!attributes.verticalAlign) return {}\n          return {\n            style: `vertical-align: ${attributes.verticalAlign}`,\n            \"data-vertical-align\": attributes.verticalAlign,\n          }\n        },\n      },\n    }\n  },\n}).configure({\n  HTMLAttributes: {\n    class: cn(\n      \"h-10 px-2 text-left align-middle font-medium text-muted-foreground\",\n      \"border-b border-r last:border-r-0 bg-muted/10\",\n      \"relative box-border min-w-[1em]\",\n      \"[&>p]:m-0\",\n      // Selected cell overlay using Tailwind after: pseudo-element\n      \"[&.selectedCell]:after:content-[''] [&.selectedCell]:after:absolute [&.selectedCell]:after:inset-0\",\n      \"[&.selectedCell]:after:bg-primary [&.selectedCell]:after:opacity-[0.08] [&.selectedCell]:after:pointer-events-none\"\n    ),\n  },\n})\n\nexport const EditorTableCellExtension = TableCell.extend({\n  addAttributes() {\n    return {\n      ...this.parent?.(),\n      textAlign: {\n        default: null,\n        parseHTML: (element) =>\n          element.style.textAlign || element.getAttribute(\"data-text-align\"),\n        renderHTML: (attributes) => {\n          if (!attributes.textAlign) return {}\n          return {\n            style: `text-align: ${attributes.textAlign}`,\n            \"data-text-align\": attributes.textAlign,\n          }\n        },\n      },\n      verticalAlign: {\n        default: null,\n        parseHTML: (element) =>\n          element.style.verticalAlign ||\n          element.getAttribute(\"data-vertical-align\"),\n        renderHTML: (attributes) => {\n          if (!attributes.verticalAlign) return {}\n          return {\n            style: `vertical-align: ${attributes.verticalAlign}`,\n            \"data-vertical-align\": attributes.verticalAlign,\n          }\n        },\n      },\n    }\n  },\n}).configure({\n  HTMLAttributes: {\n    class: cn(\n      \"p-2 align-middle border-b\",\n      \"[&:not(:last-child)]:border-r\",\n      \"relative box-border min-w-[1em]\",\n      \"[&>p]:m-0\",\n      // Selected cell overlay using Tailwind after: pseudo-element\n      \"[&.selectedCell]:after:content-[''] [&.selectedCell]:after:absolute [&.selectedCell]:after:inset-0\",\n      \"[&.selectedCell]:after:bg-primary [&.selectedCell]:after:opacity-[0.08] [&.selectedCell]:after:pointer-events-none\"\n    ),\n  },\n})\n\n// Export as array for easy use\nexport const EditorTableExtensions = [\n  EditorTableExtension,\n  EditorTableRowExtension,\n  EditorTableHeaderExtension,\n  EditorTableCellExtension,\n]\n\n// =============================================================================\n// EditorBubbleMenuTable\n// =============================================================================\n\nexport interface EditorBubbleMenuTableProps\n  extends Omit<React.ComponentProps<typeof BubbleMenu>, \"editor\" | \"children\"> {}\n\nexport function EditorBubbleMenuTable(props: EditorBubbleMenuTableProps) {\n  const ctx = React.useContext(EditorContext)\n  const editor = ctx?.editor\n\n  const {\n    canMergeCells = false,\n    canSplitCell = false,\n    canDeleteColumn = false,\n    canDeleteRow = false,\n  } =\n    useEditorState({\n      editor: editor ?? null,\n      selector: ({ editor: e }): {\n        canMergeCells: boolean\n        canSplitCell: boolean\n        canDeleteColumn: boolean\n        canDeleteRow: boolean\n      } => {\n        if (!e) {\n          return {\n            canMergeCells: false,\n            canSplitCell: false,\n            canDeleteColumn: false,\n            canDeleteRow: false,\n          }\n        }\n        return {\n          canMergeCells: e.can().mergeCells(),\n          canSplitCell: e.can().splitCell(),\n          canDeleteColumn: e.can().deleteColumn(),\n          canDeleteRow: e.can().deleteRow(),\n        }\n      },\n    }) ?? {}\n\n  if (!editor) return null\n\n  return (\n    <BubbleMenu\n      {...props}\n      editor={editor}\n      tippyOptions={{\n        duration: 100,\n        placement: \"bottom\",\n        getReferenceClientRect: () => {\n          const { view, state } = editor\n          const domAtPos = view.domAtPos(state.selection.from)\n          const node = domAtPos.node\n          const tableElement =\n            node instanceof Element\n              ? node.closest(\"table\")\n              : node.parentElement?.closest(\"table\")\n          if (tableElement) {\n            return tableElement.getBoundingClientRect()\n          }\n          return view.dom.getBoundingClientRect()\n        },\n      }}\n      shouldShow={({ editor: e }) => e.isActive(\"table\")}\n      className=\"w-fit\"\n    >\n      <div className=\"bg-popover flex items-center gap-0.5 rounded-md border p-0.5 shadow-md\">\n        {/* Column Actions */}\n        <DropdownMenu modal={false}>\n          <DropdownMenuTrigger asChild>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 gap-1 px-2 text-xs\"\n            >\n              <Columns3 className=\"size-3.5\" />\n              Column\n              <ChevronDown className=\"size-3 opacity-50\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContentPrimitive\n            align=\"start\"\n            sideOffset={8}\n            className={cn(\n              \"min-w-[160px]\",\n              \"bg-popover text-popover-foreground z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md\",\n              \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\"\n            )}\n          >\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().toggleHeaderColumn().run()}\n            >\n              <TableProperties className=\"mr-2 size-3.5\" />\n              Toggle Header\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().addColumnBefore().run()}\n            >\n              <ArrowLeftToLine className=\"mr-2 size-3.5\" />\n              Insert Before\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().addColumnAfter().run()}\n            >\n              <ArrowRightToLine className=\"mr-2 size-3.5\" />\n              Insert After\n            </DropdownMenuItem>\n            <div className=\"bg-border my-1 h-px\" />\n            <DropdownMenuItem\n              onClick={() =>\n                editor\n                  .chain()\n                  .focus()\n                  .setCellAttribute(\"textAlign\", \"left\")\n                  .run()\n              }\n            >\n              <AlignLeft className=\"mr-2 size-3.5\" />\n              Align Left\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() =>\n                editor\n                  .chain()\n                  .focus()\n                  .setCellAttribute(\"textAlign\", \"center\")\n                  .run()\n              }\n            >\n              <AlignCenter className=\"mr-2 size-3.5\" />\n              Align Center\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() =>\n                editor\n                  .chain()\n                  .focus()\n                  .setCellAttribute(\"textAlign\", \"right\")\n                  .run()\n              }\n            >\n              <AlignRight className=\"mr-2 size-3.5\" />\n              Align Right\n            </DropdownMenuItem>\n            <div className=\"bg-border my-1 h-px\" />\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().deleteColumn().run()}\n              className=\"text-destructive focus:text-destructive\"\n            >\n              <Trash2 className=\"mr-2 size-3.5\" />\n              Delete Column\n            </DropdownMenuItem>\n          </DropdownMenuContentPrimitive>\n        </DropdownMenu>\n\n        {/* Row Actions */}\n        <DropdownMenu modal={false}>\n          <DropdownMenuTrigger asChild>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 gap-1 px-2 text-xs\"\n            >\n              <Rows3 className=\"size-3.5\" />\n              Row\n              <ChevronDown className=\"size-3 opacity-50\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContentPrimitive\n            align=\"start\"\n            sideOffset={8}\n            className={cn(\n              \"min-w-[160px]\",\n              \"bg-popover text-popover-foreground z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md\",\n              \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\"\n            )}\n          >\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().toggleHeaderRow().run()}\n            >\n              <TableProperties className=\"mr-2 size-3.5\" />\n              Toggle Header\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().addRowBefore().run()}\n            >\n              <ArrowUpToLine className=\"mr-2 size-3.5\" />\n              Insert Above\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().addRowAfter().run()}\n            >\n              <ArrowDownToLine className=\"mr-2 size-3.5\" />\n              Insert Below\n            </DropdownMenuItem>\n\n            <div className=\"bg-border my-1 h-px\" />\n            <DropdownMenuItem\n              onClick={() =>\n                editor\n                  .chain()\n                  .focus()\n                  .setCellAttribute(\"verticalAlign\", \"top\")\n                  .run()\n              }\n            >\n              <AlignVerticalJustifyStart className=\"mr-2 size-3.5\" />\n              Align Top\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() =>\n                editor\n                  .chain()\n                  .focus()\n                  .setCellAttribute(\"verticalAlign\", \"middle\")\n                  .run()\n              }\n            >\n              <AlignVerticalJustifyCenter className=\"mr-2 size-3.5\" />\n              Align Middle\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() =>\n                editor\n                  .chain()\n                  .focus()\n                  .setCellAttribute(\"verticalAlign\", \"bottom\")\n                  .run()\n              }\n            >\n              <AlignVerticalJustifyEnd className=\"mr-2 size-3.5\" />\n              Align Bottom\n            </DropdownMenuItem>\n            <div className=\"bg-border my-1 h-px\" />\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().deleteRow().run()}\n              className=\"text-destructive focus:text-destructive\"\n            >\n              <Trash2 className=\"mr-2 size-3.5\" />\n              Delete Row\n            </DropdownMenuItem>\n          </DropdownMenuContentPrimitive>\n        </DropdownMenu>\n\n        {/* Cell Actions */}\n        <DropdownMenu modal={false}>\n          <DropdownMenuTrigger asChild>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              className=\"h-7 gap-1 px-2 text-xs\"\n            >\n              <Combine className=\"size-3.5\" />\n              Cell\n              <ChevronDown className=\"size-3 opacity-50\" />\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContentPrimitive\n            align=\"start\"\n            sideOffset={8}\n            className={cn(\n              \"min-w-[160px]\",\n              \"bg-popover text-popover-foreground z-50 min-w-[8rem] overflow-hidden rounded-md border p-1 shadow-md\",\n              \"data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\"\n            )}\n          >\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().mergeCells().run()}\n              disabled={!canMergeCells}\n            >\n              <Combine className=\"mr-2 size-3.5\" />\n              Merge Cells\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().splitCell().run()}\n              disabled={!canSplitCell}\n            >\n              <Split className=\"mr-2 size-3.5\" />\n              Split Cell\n            </DropdownMenuItem>\n            <DropdownMenuItem\n              onClick={() => editor.chain().focus().toggleHeaderCell().run()}\n            >\n              <TableProperties className=\"mr-2 size-3.5\" />\n              Toggle Header Cell\n            </DropdownMenuItem>\n          </DropdownMenuContentPrimitive>\n        </DropdownMenu>\n\n        {/* Quick Delete Actions */}\n        <div className=\"ml-0.5 flex items-center gap-0.5 border-l pl-1\">\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"text-destructive hover:text-destructive hover:bg-destructive/10 h-7 gap-1 px-2 text-xs\"\n            onClick={() => editor.chain().focus().deleteColumn().run()}\n            disabled={!canDeleteColumn}\n            title=\"Delete Column\"\n          >\n            <Columns3 className=\"size-3.5\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            className=\"text-destructive hover:text-destructive hover:bg-destructive/10 h-7 gap-1 px-2 text-xs\"\n            onClick={() => editor.chain().focus().deleteRow().run()}\n            disabled={!canDeleteRow}\n            title=\"Delete Row\"\n          >\n            <Rows3 className=\"size-3.5\" />\n          </Button>\n        </div>\n\n        {/* Delete Table */}\n        <Button\n          variant=\"ghost\"\n          size=\"sm\"\n          className=\"text-destructive hover:text-destructive hover:bg-destructive/10 h-7 w-7 p-0\"\n          onClick={() => editor.chain().focus().deleteTable().run()}\n          title=\"Delete Table\"\n        >\n          <Trash2 className=\"size-3.5\" />\n        </Button>\n      </div>\n    </BubbleMenu>\n  )\n}\n\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}